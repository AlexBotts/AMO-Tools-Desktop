<div class="d-flex flex-column output-summary">

  <h4 class="show-print">Executive Summary</h4>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <td [ngStyle]="{'width.%': 15}" class="bold">($K/yr)</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}"
          [ngStyle]="{'width.%': tableCellWidth}" class="bold text-center">Baseline</td>
        <td [ngStyle]="{'width.%': tableCellWidth}" *ngFor="let modification of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}" class="bold text-center">
          {{modification.name}}</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="bold">Percent Savings (%)</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td class="percent-graph" *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <div class="hide-print"
            *ngIf="modResults.outputData.boilerOutput && getSavingsPercentage(baselineOutput.operationsOutput.totalOperatingCost, modResults.outputData.operationsOutput.totalOperatingCost)">
            <app-percent-graph
              [value]="getSavingsPercentage(baselineOutput.operationsOutput.totalOperatingCost, modResults.outputData.operationsOutput.totalOperatingCost)"
              [valueDescription]="'Percent Savings'" [unit]="'%'" [title]="'ssmt-opportunities-savings'">
            </app-percent-graph>
          </div>
          <div class="show-print text-center"
            *ngIf="getSavingsPercentage(baselineOutput.operationsOutput.totalOperatingCost, modResults.outputData.operationsOutput.totalOperatingCost)">
            {{getSavingsPercentage(baselineResults, modification) | number:'1.0'}} %
          </div>
          <div
            *ngIf="!modResults.outputData.boilerOutput || !getSavingsPercentage(baselineOutput.operationsOutput.totalOperatingCost, modResults.outputData.operationsOutput.totalOperatingCost)"
            class="mx-auto">&mdash; &mdash;</div>
        </td>
      </tr>
      <tr>
        <td class="bold" [ngStyle]="{'width.%': 15}">Power Cost</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">
          <span *ngIf="baselineOutput.boilerOutput">
            {{baselineOutput.operationsOutput.powerGenerationCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!baselineOutput.boilerOutput">&mdash;</span>
        </td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{modResults.outputData.operationsOutput.powerGenerationCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td class="pl-4">Savings</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{(baselineOutput.operationsOutput.powerGenerationCost - modResults.outputData.operationsOutput.powerGenerationCost) / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td class="bold" [ngStyle]="{'width.%': 15}">Fuel Cost</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">
          <span *ngIf="baselineOutput.operationsOutput.boilerFuelCost">
            {{baselineOutput.operationsOutput.boilerFuelCost / 1000|currency:'USD'}}
          </span>
          <span *ngIf="!baselineOutput.operationsOutput.boilerFuelCost">&mdash;</span>

        </td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{modResults.outputData.operationsOutput.boilerFuelCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td class="pl-4">Savings</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{(baselineOutput.operationsOutput.boilerFuelCost - modResults.outputData.operationsOutput.boilerFuelCost) / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td class="bold" [ngStyle]="{'width.%': 15}">Make-up Water Cost</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">
          <span *ngIf="baselineOutput.operationsOutput.makeupWaterCost">
            {{baselineOutput.operationsOutput.makeupWaterCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!baselineOutput.operationsOutput.makeupWaterCost">&mdash;</span>
        </td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{modResults.outputData.operationsOutput.makeupWaterCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td class="pl-4">Savings</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{(baselineOutput.operationsOutput.makeupWaterCost - modResults.outputData.operationsOutput.makeupWaterCost) / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr class="bold">
        <td>Annual Cost</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">
          <span *ngIf="baselineOutput.operationsOutput.totalOperatingCost">
            {{baselineOutput.operationsOutput.totalOperatingCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!baselineOutput.operationsOutput.totalOperatingCost">&mdash;</span>
        </td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex, 'positive-savings': getSavingsPercentage(baselineOutput.operationsOutput.totalOperatingCost, modResults.outputData.operationsOutput.totalOperatingCost) > 10}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{modResults.outputData.operationsOutput.totalOperatingCost / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr class="bold">
        <td>Annual Savings</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex, 'positive-savings': getSavingsPercentage(baselineOutput.operationsOutput.totalOperatingCost, modResults.outputData.operationsOutput.totalOperatingCost) > 10}">
          <span *ngIf="modResults.outputData.boilerOutput">
            {{(baselineOutput.operationsOutput.totalOperatingCost - modResults.outputData.operationsOutput.totalOperatingCost) / 1000 | currency:'USD'}}
          </span>
          <span *ngIf="!modResults.outputData.boilerOutput">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td>Implementation Cost</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td *ngFor="let modification of ssmt.modifications; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modification.ssmt.operatingCosts.implementationCosts">
            {{modification.ssmt.operatingCosts.implementationCosts | currency:'USD'}}
          </span>
          <span *ngIf="!modification.ssmt.operatingCosts.implementationCosts">&mdash;</span>
        </td>
      </tr>
      <tr>
        <td>Payback Period (months)</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">&mdash;</td>
        <td *ngFor="let modification of ssmt.modifications; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <span *ngIf="modification.ssmt.operatingCosts.implementationCosts">
            {{getPayback(modificationOutputs[index].outputData.operationsOutput.totalOperatingCost, baselineOutput.operationsOutput.totalOperatingCost, modification.ssmt.operatingCosts.implementationCosts) | number:'1.0'}}
          </span>
          <span *ngIf="!modification.ssmt.operatingCosts.implementationCosts">&mdash;</span>
        </td>
      </tr>
      <tr class="hide-print" *ngIf="inRollup">
        <td>Use for Summary</td>
        <td [ngClass]="{'selected-modification': selectedModificationIndex == -1}">
          <input *ngIf="baselineOutput.boilerOutput" name="{{'summarySelect_'+assessment.id}}" type="radio"
            (change)="useModification()" [value]="-1" [(ngModel)]="selectedModificationIndex">
          <span *ngIf="!baselineOutput.boilerOutput" class="alert-danger small">
            Invalid Data
          </span>
        </td>
        <td *ngFor="let modResults of modificationOutputs; let index = index;"
          [ngClass]="{'selected-modification': index == selectedModificationIndex}">
          <input *ngIf="modResults.outputData.boilerOutput" name="{{'summarySelect_'+assessment.id}}" type="radio"
            (change)="useModification()" [value]="index" [(ngModel)]="selectedModificationIndex">
          <span *ngIf="!modResults.outputData.boilerOutput" class="alert-danger small">
            Invalid Data
          </span>
        </td>
      </tr>
    </tbody>
  </table>

</div>