<div class="d-flex h-100 ssmt-diagram">
  <div class="d-flex flex-column h-100 p-3 diagram-container">
    <div class="d-flex flex-column flex-fill align-content-stretch">
      <div class="boiler p-0" (click)="selectTable('boiler')">
        <app-boiler-diagram [boiler]="boiler" [inputData]="inputData"></app-boiler-diagram>
      </div>
      <div class="d-flex justify-content-between">
        <div class="d-flex flex-column justify-content-between flex-fill">
          <div class="p-0 d-flex justify-content-end">
            <div class="w-100">
              <app-header-diagram [header]="highPressureHeader" [pressureLevel]="'highPressure'" [condensate]="highPressureCondensate"
                [headerSteamUsage]="inputData.headerInput.highPressure.processSteamUsage"></app-header-diagram>
            </div>
          </div>
          <div class="d-flex w-100">
            <div class="d-flex flex-fill">
              <div class="p-0 w-25">
                <app-prv-diagram *ngIf="highToMediumPressurePRV" [prv]="highToMediumPressurePRV" [inletSteam]="'high-pressure'" [outletSteam]="'medium-pressure'"></app-prv-diagram>
                <app-prv-diagram *ngIf="lowPressurePRV && !highToMediumPressurePRV" [prv]="lowPressurePRV" [inletSteam]="'high-pressure'" [outletSteam]="'low-pressure'"></app-prv-diagram>
                <app-one-header-connector *ngIf="!mediumPressureHeader && !lowPressureHeader"></app-one-header-connector>
              </div>
              <div class="p-0 w-25 turbineDiagram" (click)="selectTable('condensingTurbine')">
                <app-turbine-diagram *ngIf="condensingTurbine" [noOutletConnection]="lowPressureHeader != undefined" [turbine]="condensingTurbine" [inletColor]="'high-pressure'"
                  [outletColor]="'makeup-water'"></app-turbine-diagram>
              </div>
              <div class="p-0 w-25 turbineDiagram" (click)="selectTable('highPressureToMediumPressureTurbine')">
                <app-turbine-diagram *ngIf="highPressureToMediumPressureTurbine" [noOutletConnection]="false" [turbine]="highPressureToMediumPressureTurbine"
                  [inletColor]="'high-pressure'" [outletColor]="'medium-pressure'"></app-turbine-diagram>
              </div>
              <div class="p-0 w-25 turbineDiagram" (click)="selectTable('highToLowPressureTurbine')">
                <app-turbine-diagram *ngIf="highToLowPressureTurbine" [noOutletConnection]="mediumPressureHeader != undefined" [turbine]="highToLowPressureTurbine" [inletColor]="'high-pressure'"
                  [outletColor]="'low-pressure'"></app-turbine-diagram>
              </div>
            </div>
            <div class="w-25">
              <app-flash-tank-diagram *ngIf="highPressureFlashTank && mediumPressureHeader" [flashTank]="highPressureFlashTank" [steamPressure]="'medium-pressure'"></app-flash-tank-diagram>
              <app-flash-tank-diagram *ngIf="highPressureFlashTank && !mediumPressureHeader" [flashTank]="highPressureFlashTank" [steamPressure]="'low-pressure'"></app-flash-tank-diagram>
              <app-condensate-connector *ngIf="!highPressureFlashTank"></app-condensate-connector>
            </div>
          </div>
          <div class="p-0 d-flex justify-content-end">
            <div class="w-100">
              <app-header-diagram *ngIf="mediumPressureHeader" [header]="mediumPressureHeader" [pressureLevel]="'mediumPressure'" [condensate]="mediumPressureCondensate"
                [headerSteamUsage]="inputData.headerInput.mediumPressure.processSteamUsage"></app-header-diagram>
            </div>
          </div>
          <div class="d-flex w-100">
            <div class="d-flex flex-fill">
              <div class="p-0 w-25">
                <app-prv-diagram *ngIf="lowPressurePRV && highToMediumPressurePRV" [prv]="lowPressurePRV" [inletSteam]="'medium-pressure'" [outletSteam]="'low-pressure'"></app-prv-diagram>
              </div>
              <div class="p-0 w-25">
                <app-turbine-connector *ngIf="condensingTurbine && mediumPressureHeader" [noOutletConnection]="true" [inletColor]="'makeup-water'"></app-turbine-connector>
              </div>
              <div class="p-0 w-25 turbineDiagram" (click)="selectTable('mediumToLowPressureTurbine')">
                <app-turbine-diagram *ngIf="mediumToLowPressureTurbine" [noOutletConnection]="false" [turbine]="mediumToLowPressureTurbine" [inletColor]="'medium-pressure'"
                  [outletColor]="'low-pressure'"></app-turbine-diagram>
              </div>
              <div class="p-0 w-25">
                <app-turbine-connector *ngIf="highToLowPressureTurbine && mediumPressureHeader" [noOutletConnection]="false" [inletColor]="'low-pressure'"></app-turbine-connector>
              </div>
            </div>
            <div class="w-25">
              <app-flash-tank-diagram *ngIf="mediumPressureFlashTank" [flashTank]="mediumPressureFlashTank" [steamPressure]="'low-pressure'"></app-flash-tank-diagram>
              <app-condensate-connector *ngIf="!mediumPressureFlashTank && mediumPressureHeader"></app-condensate-connector>
            </div>
          </div>
          <div class="p-0 d-flex justify-content-end">
            <div class="w-100">
              <app-header-diagram *ngIf="lowPressureHeader" [header]="lowPressureHeader" [pressureLevel]="'lowPressure'" [condensate]="lowPressureCondensate"
                [headerSteamUsage]="inputData.headerInput.lowPressure.processSteamUsage"></app-header-diagram>
            </div>
          </div>
        </div>
        <!-- <div class="condensate p-1">
          condensate
        </div> -->
      </div>
      <div class="d-flex w-100">
        <div class="d-flex flex-fill">
          <div class="p-0 w-25">
            <app-deaerator-diagram *ngIf="lowPressureHeader" [deaerator]="deaerator" [inletPressure]="'low-pressure'"></app-deaerator-diagram>
            <app-deaerator-diagram *ngIf="!lowPressureHeader" [deaerator]="deaerator" [inletPressure]="'high-pressure'"></app-deaerator-diagram>
          </div>
          <div class="p-0 w-25">
            <app-turbine-connector *ngIf="condensingTurbine" [noOutletConnection]="false" [inletColor]="'makeup-water'"></app-turbine-connector>
          </div>
          <div class="p-0 w-25">

          </div>
          <div class="p-0 w-25">
            <app-blowdown-flash-tank *ngIf="blowdownFlashTank" [flashTank]="blowdownFlashTank"></app-blowdown-flash-tank>
          </div>
        </div>
        <div class="w-25">
          <app-condensate-flash-tank *ngIf="condensateFlashTank" [flashTank]="condensateFlashTank"></app-condensate-flash-tank>
          <app-condensate-connector *ngIf="!condensateFlashTank"></app-condensate-connector>
        </div>
      </div>
      <div class="p-0 d-flex">
        <div class="w-100">
          <app-return-condensate-header [makeupWaterAndCondensateHeader]="makeupWaterAndCondensateHeader"></app-return-condensate-header>
        </div>
      </div>
      <div class="p-0 d-flex">
        <div class="w-100">
          <app-makeup-water-diagram [makeupWater]="makeupWater"></app-makeup-water-diagram>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-column h-100 diagram-help-panel">
    <div class="d-flex flex-wrap tabs primary mr-2 ml-2">
      <div class="flex-fill panel-tab-item h-100" [ngClass]="{'active': tabSelect == 'results'}">
        <a class="border-left-0 h-100 d-flex justify-content-center align-items-center" (click)="setTab('results')">
          <div>Results</div>
        </a>
      </div>
      <div class="flex-fill panel-tab-item h-100" [ngClass]="{'active': tabSelect == 'help'}">
        <a class="h-100 d-flex justify-content-center align-items-center" (click)="setTab('help')">
          <div>Help</div>
        </a>
      </div>
    </div>
    <div class="d-flex justify-content-center mr-2 ml-2">
      <div class="pt-4" *ngIf="tabSelect == 'results'">
        <app-cost-table *ngIf="selectedTable == 'cost'"></app-cost-table>
        <app-boiler-table *ngIf="selectedTable == 'boiler'" [boiler]="boiler" [inputData]="inputData"></app-boiler-table>
        <app-turbine-table *ngIf="selectedTable == 'highToLowPressureTurbine'" [turbineName]="'High to Low'" [turbine]="highToLowPressureTurbine"></app-turbine-table>
        <app-turbine-table *ngIf="selectedTable == 'highPressureToMediumPressureTurbine'" [turbineName]="'High to Medium'"
          [turbine]="highPressureToMediumPressureTurbine"></app-turbine-table>
        <app-turbine-table *ngIf="selectedTable == 'mediumToLowPressureTurbine'" [turbineName]="'Medium to Low'"
          [turbine]="mediumToLowPressureTurbine"></app-turbine-table>
        <app-turbine-table *ngIf="selectedTable == 'condensingTurbine'" [turbineName]="'Condensing'" [turbine]="condensingTurbine"></app-turbine-table>
      </div>
      <div *ngIf="tabSelect == 'help'">
        <app-diagram-help></app-diagram-help>
      </div>
    </div>
  </div>
</div>