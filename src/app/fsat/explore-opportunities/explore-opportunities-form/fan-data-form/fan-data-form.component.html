<div class="checkbox">
  <label class="group-label" for="showFanType">
    <input name="showFanType" type="checkbox" id="showFanType" (focus)="focusField('fanType')" (change)="toggleFanType()" [(ngModel)]="showFanType" />
    Install More Efficient Fan
  </label>
</div>
<li *ngIf="showFanType">
  <!-- <div class="checkbox">
    <label for="modifyFanType">
      <input type="checkbox" id="modifyFanType" value="true" (focus)="focusField('fanType')" (change)="toggleFanType()"
        [(ngModel)]="showFanType" /> Modify Fan Type
    </label>
  </div> -->
  <form [formGroup]="baselineForm">
    <div class="form-group">
      <label for="baselineFanType">Baseline Fan Type</label>
      <select class="form-control" name="fanType" id="fanType" (change)="setFanTypes()" (focus)="focusField('fanType')"
        formControlName="fanType">
        <option *ngFor="let fanType of fanTypes" [ngValue]="fanType.value">{{fanType.display}}</option>
      </select>
    </div>
  </form>
  <form [formGroup]="modificationForm">
    <div class="form-group">
      <label for="modificationFanType">Modification Fan Type</label>
      <select class="form-control" name="fanType2" id="fanType2" (change)="setFanTypes()" (focus)="focusField('fanType')"
        formControlName="fanType">
        <option *ngFor="let fanType of fanTypes" [ngValue]="fanType.value">{{fanType.display}}</option>
      </select>
    </div>
  </form>
</li>
<li *ngIf="(modificationForm.controls.fanType.value == 12) && showFanType">
  <div class="checkbox">
    <label for="modifiedFanSpecified">
      <input type="checkbox" id="modifiedFanSpecified" (focus)="focusField('fanSpecified')" [(ngModel)]="showFanSpecified" />
      Modify Fan Specified Efficiency
    </label>
  </div>
  <form [formGroup]="modificationForm" *ngIf="showFanSpecified">
    <!-- <div class="form-group">
          <label for="baselinePumpSpecified">Baseline Pump Specified Efficiency</label>
          <div class="input-group">
            <input name="baselinePumpSpecified" [disabled]="tmpBaselineFanType != 'Specified Optimal Efficiency'" type="number" step="any"
              id="baselinePumpSpecified" class="form-control" (focus)="focusField('pumpSpecified')" (input)="checkEfficiency(psat.inputs.pump_specified, 1)"
              [(ngModel)]="psat.inputs.pump_specified" />
            <span class="input-group-addon units">%</span>
          </div>
          <span class="alert-danger pull-right small" *ngIf="specifiedError1 !== null">{{specifiedError1}}</span>
        </div> -->
    <div class="form-group" [ngClass]="{'invalid': modificationForm.controls.fanSpecified.invalid}">
      <label for="modificationFanSpecified">Modification Fan Specified Efficiency</label>
      <div class="input-group">
        <input name="modificationFanSpecified" type="number" step="any" id="modificationFanSpecified" class="form-control"
          (focus)="focusField('fanSpecified')" (input)="calculate()" formControlName="fanSpecified" />
        <span class="input-group-addon units">%</span>
      </div>
      <span class="alert-danger pull-right small" *ngIf="modificationForm.controls.fanSpecified.invalid && !modificationForm.controls.fanSpecified.pristine">
        <span *ngIf="modificationForm.controls.fanSpecified.errors.required">Value Required</span>
        <span *ngIf="modificationForm.controls.fanSpecified.errors.max">Value can't be greater than
          {{modificationForm.controls.fanSpecified.errors.max.max}} %.</span>
        <span *ngIf="modificationForm.controls.fanSpecified.errors.min">Value can't be less than
          {{modificationForm.controls.fanSpecified.errors.min.min}} %.</span>
      </span>
    </div>
  </form>
</li>
<div class="checkbox">
  <label class="group-label" for="modifyMotorDrive">
    <input name="modifyMotorDrive" type="checkbox" id="modifyMotorDrive" (focus)="focusField('drive')" (change)="toggleMotorDrive()" [(ngModel)]="showMotorDrive" />
    Install More Efficient Drive Type
  </label>
</div>
<li *ngIf="showMotorDrive">
  <!-- <div class="checkbox">
    <label for="modifyMotorDrive">
      <input type="checkbox" id="modifyMotorDrive" value="true" (focus)="focusField('drive')" (change)="toggleMotorDrive()"
        [(ngModel)]="showMotorDrive" /> Modify Motor Drive
    </label>
  </div> -->
  <form [formGroup]="baselineForm">
    <div class="form-group">
      <label for="baselineMotorDrive">Baseline Motor Drive</label>
      <select class="form-control" name="drive" id="drive" (change)="calculate()" (focus)="focusField('drive')"
        formControlName="drive">
        <option *ngFor="let drive of drives" [ngValue]="drive.value">{{drive.display}}</option>
      </select>
    </div>

    <div class="form-group" *ngIf="baselineForm.controls.drive.value == 4" [ngClass]="{'invalid': baselineForm.controls.specifiedDriveEfficiency.invalid}">
      <label for="baselineSpecifiedDriveEfficiency">Baseline Drive Efficiency</label>
      <div class="input-group">
        <input type="number" name="baselineSpecifiedDriveEfficiency" step="any" class="form-control" formControlName="specifiedDriveEfficiency"
          id="baselineSpecifiedDriveEfficiency" (input)="changeDriveType()" (focus)="focusField('specifiedDriveEfficiency')">
        <span class="input-group-addon units">%</span>
      </div>
      <span class="alert-danger pull-right small" *ngIf="baselineForm.controls.specifiedDriveEfficiency.invalid && !baselineForm.controls.specifiedDriveEfficiency.pristine">
        <span *ngIf="baselineForm.controls.specifiedDriveEfficiency.errors.required">Value Required</span>
        <span *ngIf="baselineForm.controls.specifiedDriveEfficiency.errors.max">Value can't be greater than
          {{baselineForm.controls.specifiedDriveEfficiency.errors.max.max}} %.</span>
        <span *ngIf="baselineForm.controls.specifiedDriveEfficiency.errors.min">Value can't be less than
          {{baselineForm.controls.specifiedDriveEfficiency.errors.min.min}} %.</span>
      </span>
    </div>
  </form>
  <form [formGroup]="modificationForm">
    <div class="form-group">
      <label for="modificationMotorDrive">Modification Motor Drive</label>
      <select class="form-control" name="drive2" id="drive2" (change)="changeDriveType()" (focus)="focusField('drive')"
        formControlName="drive">
        <option *ngFor="let drive2 of drives" [ngValue]="drive2.value">{{drive2.display}}</option>
      </select>
    </div>

    <div class="form-group" *ngIf="modificationForm.controls.drive.value == 4" [ngClass]="{'invalid': modificationForm.controls.specifiedDriveEfficiency.invalid}">
      <label for="modificationSpecifiedDriveEfficiency">Modification Drive Efficiency</label>
      <div class="input-group">
        <input type="number" name="modificationSpecifiedDriveEfficiency" step="any" class="form-control"
          formControlName="specifiedDriveEfficiency" id="modificationSpecifiedDriveEfficiency" (input)="calculate()"
          (focus)="focusField('specifiedDriveEfficiency')">
        <span class="input-group-addon units">%</span>
      </div>
      <span class="alert-danger pull-right small" *ngIf="modificationForm.controls.specifiedDriveEfficiency.invalid && !modificationForm.controls.specifiedDriveEfficiency.pristine">
        <span *ngIf="modificationForm.controls.specifiedDriveEfficiency.errors.required">Value Required</span>
        <span *ngIf="modificationForm.controls.specifiedDriveEfficiency.errors.max">Value can't be greater than
          {{modificationForm.controls.specifiedDriveEfficiency.errors.max.max}} %.</span>
        <span *ngIf="modificationForm.controls.specifiedDriveEfficiency.errors.min">Value can't be less than
          {{modificationForm.controls.specifiedDriveEfficiency.errors.min.min}} %.</span>
      </span>
    </div>
  </form>
</li>