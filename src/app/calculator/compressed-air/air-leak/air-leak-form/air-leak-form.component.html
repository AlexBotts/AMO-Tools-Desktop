<form [formGroup]="leakForm">
    <label *ngIf="!inEditMode" class="group-label-wide mb-2">Add New Leak</label>
    <label *ngIf="inEditMode" class="group-label-wide mb-2">Edit Leak</label>
    <div class="form-group pb-1">
      <label for="name">Leak Name</label>
      <div class="input-group">
        <input name="name" class="form-control" type="text" step="any"
          formControlName="name" id="name" onfocus="this.select();"
          (focus)="changeField('name')">
          <span class="alert-danger pull-right small"
          *ngIf="leakForm.controls.name.invalid && !leakForm.controls.name.pristine">
          <span *ngIf="leakForm.controls.name.errors.required">Value required.</span>
        </span>
      </div>
    </div>
    <div class="form-group pb-1">
      <label for="leakDescription">Leak Description</label>
      <div class="input-group">
        <textarea name="leakDescription" rows="4" class="form-control" id="leakDescription" 
        (focus)="changeField('leakDescription')" formControlName="leakDescription" onfocus="this.select();"></textarea>
        <span class="alert-danger pull-right small"
        *ngIf="leakForm.controls.leakDescription.invalid && !leakForm.controls.leakDescription.pristine">
        <span *ngIf="leakForm.controls.leakDescription.errors.required">Value required.</span>
      </span>
      </div>
    </div>
    <div class="form-group">
      <label class="small" for="measurementMethod">Measurement Method</label>
      <div class="input-group">
        <select class="form-control" name="measurementMethod"
          id="measurementMethod" formControlName="measurementMethod"
          (focus)="changeField('measurementMethod')">
          <option *ngFor="let method of measurementMethods" [ngValue]="method.value">{{method.display}}</option>
        </select>
      </div>
    </div>
    <app-estimate-method-form *ngIf="leakForm.controls.measurementMethod.value == 0"></app-estimate-method-form>
    <!-- <app-bag-method-form *ngIf="leakForm.controls.measurementMethod.value == 2"></app-bag-method-form>
    <app-orifice-method-form *ngIf="leakForm.controls.measurementMethod.value == 3"></app-orifice-method-form>
    <app-decibel-method-form *ngIf="leakForm.controls.measurementMethod.value == 1"></app-decibel-method-form> -->

    <div class="w-100 justify-content-end btn-group btn-group-sm">
      <div class="btn-group btn-group-sm">
        <button *ngIf="!inEditMode" type="button" class="btn btn-primary pull-right btn-sm m-2 btn-form "
          [disabled]="!leakForm.valid"
          (click)="addLeak()">
          Add Leak
        </button>
        <button *ngIf="inEditMode" type="button" class="btn btn-primary pull-right btn-sm m-2 btn-form"
          (click)="saveLeak()">
          Save Leak
        </button>
      </div>
    </div>
  </form>