<app-phast-banner (togglePanel)="toggleOpenPanel($event)" [assessment]="assessment"></app-phast-banner>
<app-phast-tabs [currentTab]="currentTab" (tabChange)="changeTab($event)"></app-phast-tabs>

<div *ngIf="assessment">
  <div class="row tab-content" *ngIf="currentTab == 'system-setup'">
    <div class="col-12">
      <app-system-setup></app-system-setup>
    </div>
  </div>

  <div class="row tab-content" *ngIf="currentTab == 'losses'">
    <div class="col-12">
      <app-losses [(phast)]="assessment.phast" [saveClicked]="saveClicked" (saved)="saveDb()"></app-losses>
    </div>
  </div>

  <div class="row tab-content" *ngIf="currentTab == 'designed-energy-use'">
    <div class="col-12">
      <app-designed-energy-use></app-designed-energy-use>
    </div>
  </div>

  <div class="row tab-content" *ngIf="currentTab == 'aux-equipment'">
    <div class="col-12">
      <app-aux-equipment></app-aux-equipment>
    </div>
  </div>

  <div class="row tab-content" *ngIf="currentTab == 'metered-energy'">
    <div class="col-12">
      <app-metered-energy-use></app-metered-energy-use>
    </div>
  </div>

  <!--<div class="row tab-content" *ngIf="currentTab == 'sankey'">
    <div class="col-12">
      <app-sankey [losses]="assessment.phast.losses"></app-sankey>
    </div>
  </div>-->

  <div class="footer">
    <div class="pull-left">
      <button class="btn btn-secondary" *ngIf="currentTab == 'system-setup'" (click)="close()">Close</button>
      <button class="btn btn-secondary" *ngIf="currentTab != 'system-setup'" (click)="goBack()">Back</button>
    </div>
    <div>
      <div class="text-center small disclaimer">
        Disclaimer: The PHAST Tool is still in the early stages of development. Only a portion of the tools functionality is in place,
        some links/buttons/forms may not work and are placeholders for future work.
      </div>
    </div>
    <div class="pull-right">
      <button class="btn btn-primary" *ngIf="currentTab == 'system-setup'" (click)="continue()">Save & Continue</button>
      <!--<button class="btn btn-secondary" *ngIf="currentTab >= 3" (click)="exportData()">Export to CSV...</button>-->
      <button class="btn btn-primary" *ngIf="currentTab != 'system-setup'" (click)="save()">Save</button>
    </div>
  </div>
</div>