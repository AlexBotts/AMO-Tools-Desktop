<app-phast-banner (togglePanel)="toggleOpenPanel($event)" [assessment]="assessment"></app-phast-banner>
<app-phast-tabs [currentTab]="currentTab" (tabChange)="changeTab($event)"></app-phast-tabs>

<div class="row tab-content" [ngClass]="{'align-items-center':currentTab < 3}">
  <div [ngClass]="{'col-md-12': !isPanelOpen, 'col-md-9': isPanelOpen}">
    <div class="row panel" [ngClass]="{'justify-content-center':currentTab < 3}">
      <div class="col-lg-8 col-md-8 col-sm-10 col-xs-12" *ngIf="currentTab < 3">
        <app-system-basics (continue)="changeTab($event)" *ngIf="currentTab == 1"></app-system-basics>
        <app-operating-hours (continue)="changeTab($event)" *ngIf="currentTab == 2"></app-operating-hours>
      </div>
      <div class="col-12">
        <app-losses (continue)="changeTab($event)" *ngIf="currentTab == 3"></app-losses>
        <app-designed-energy-use (continue)="changeTab($event)" *ngIf="currentTab == 4"></app-designed-energy-use>
        <app-aux-equipment (continue)="changeTab($event)" *ngIf="currentTab == 5"></app-aux-equipment>
        <app-metered-energy-use (continue)="changeTab($event)" *ngIf="currentTab == 6"></app-metered-energy-use>
        <app-sankey *ngIf="currentTab == 7"></app-sankey>
      </div>
    </div>
  </div>

  <div class="col-md-3 panel dark-bg" *ngIf="isPanelOpen">
    <app-data-panel *ngIf="panelView == 'data-panel'"></app-data-panel>
    <app-help-panel *ngIf="panelView == 'help-panel'"></app-help-panel>
    <app-settings-panel *ngIf="panelView == 'settings-panel'"></app-settings-panel>
  </div>
</div>

<div class="footer">
  <div class="pull-left">
    <button class="btn btn-secondary" *ngIf="currentTab == 1" (click)="close()">Close</button>
    <button class="btn btn-secondary" *ngIf="currentTab != 1" (click)="goBack()">Back</button>
  </div>
  <div class="pull-right">
    <button class="btn btn-primary" *ngIf="currentTab < 3" (click)="continue()">Save & Continue</button>
    <button class="btn btn-secondary" *ngIf="currentTab >= 3" (click)="exportData()">Export to CSV...</button>
    <button class="btn btn-primary" *ngIf="currentTab >= 3" (click)="saveAdjustment()">Save</button>
  </div>
</div>
