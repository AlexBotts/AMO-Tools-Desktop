<app-lighting-replacement *ngIf="selectedCalc == 'lighting-replacement'" [inTreasureHunt]="true"
  (emitSave)="saveLighting($event)" (emitCancel)="cancelEditLighting()"
  (emitAddOpportunitySheet)="showOpportunitySheetModal()" [settings]="settings"
  [operatingHours]="treasureHunt.operatingHours"></app-lighting-replacement>

<app-standalone-opportunity-sheet *ngIf="selectedCalc == 'opportunity-sheet'" (emitCancel)="cancelStandaloneOpportunitySheet()"
  (emitSave)="saveStandaloneOpportunitySheet($event)" [settings]="settings">
</app-standalone-opportunity-sheet>

<app-replace-existing *ngIf="selectedCalc == 'replace-existing'" (emitCancel)="cancelReplaceExisting()"
  (emitSave)="saveReplaceExisting($event)" [settings]="settings" [inTreasureHunt]="true"
  [opperatingHours]="treasureHunt.operatingHours" (emitAddOpportunitySheet)="showOpportunitySheetModal()">
</app-replace-existing>

<app-motor-drive *ngIf="selectedCalc == 'motor-drive'" (emitCancel)="cancelMotorDrive()"
  (emitSave)="saveMotorDrive($event)" [settings]="settings" [inTreasureHunt]="true"
  [opperatingHours]="treasureHunt.operatingHours" (emitAddOpportunitySheet)="showOpportunitySheetModal()">
</app-motor-drive>

<app-natural-gas-reduction *ngIf="selectedCalc == 'natural-gas-reduction'" [inTreasureHunt]="true"
  (emitSave)="saveNaturalGasReduction($event)" (emitCancel)="cancelNaturalGasReduction()"
  (emitAddOpportunitySheet)="showOpportunitySheetModal()" [settings]="settings"
  [operatingHours]="treasureHunt.operatingHours"></app-natural-gas-reduction>

<app-electricity-reduction *ngIf="selectedCalc == 'electricity-reduction'" [inTreasureHunt]="true"
  (emitSave)="saveElectricityReduction($event)" (emitCancel)="cancelElectricityReduction()"
  (emitAddOpportunitySheet)="showOpportunitySheetModal()" [settings]="settings"
  [operatingHours]="treasureHunt.operatingHours"></app-electricity-reduction>

<app-compressed-air-reduction *ngIf="selectedCalc == 'compressed-air-reduction'" [inTreasureHunt]="true"
  (emitSave)="saveCompressedAirReduction($event)" (emitCancel)="cancelCompressedAirReduction()"
  (emitAddOpportunitySheet)="showOpportunitySheetModal()" [settings]="settings"
  [operatingHours]="treasureHunt.operatingHours"></app-compressed-air-reduction>

<app-compressed-air-pressure-reduction *ngIf="selectedCalc == 'compressed-air-pressure-reduction'"
  [inTreasureHunt]="true" (emitSave)="saveCompressedAirPressureReduction($event)"
  (emitCancel)="cancelCompressedAirPressureReduction()" (emitAddOpportunitySheet)="showOpportunitySheetModal()"
  [settings]="settings" [operatingHours]="treasureHunt.operatingHours"></app-compressed-air-pressure-reduction>

<app-water-reduction *ngIf="selectedCalc == 'water-reduction'" [inTreasureHunt]="true"
  (emitSave)="saveWaterReduction($event)" (emitCancel)="cancelWaterReduction()"
  (emitAddOpportunitySheet)="showOpportunitySheetModal()" [settings]="settings"
  [operatingHours]="treasureHunt.operatingHours"></app-water-reduction>

<div bsModal #saveCalcModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="saveCalcModalLabel" aria-hidden="true" [config]="{backdrop: 'static'}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header p-1">
        <h5 class="mb-0">Save Changes</h5>
        <!-- <button class="close" (click)="closeSaveCalcModal()">
          <span aria-hidden="true">&times;</span>
        </button> -->
      </div>
      <div class="modal-body text-center" *ngIf="selectedCalc != 'opportunity-sheet'">
        <p class="help-text" *ngIf="!calculatorOpportunitySheet">There is no opportunity sheet filled out for this
          opportunity. Would you like to add one
          before saving?</p>
        <p class="help-text" *ngIf="calculatorOpportunitySheet">Would you like to edit your opportunity sheet before
          saving?</p>
        <a class="click-link" (click)="showOpportunitySheetModal()">
          <img src="assets/images/calculator-icons/opportunity-sheet-icon.png" class="save-opportunity">
        </a> <br>
        <a class="click-link small" (click)="showOpportunitySheetModal()" *ngIf="!calculatorOpportunitySheet">+Add
          Opportunity Sheet</a>
        <a class="click-link small" (click)="showOpportunitySheetModal()" *ngIf="calculatorOpportunitySheet">Edit
          Opportunity Sheet</a>
      </div>
      <div class="modal-body text-center" *ngIf="selectedCalc == 'opportunity-sheet'">
        <p class="help-text">Are you sure you want to save the changes to your existing opportunity? These changes
          cannot be
          undone.</p>
      </div>
      <div class="modal-footer p-1">
        <button class="btn btn-danger btn-sm pull-right" (click)="hideSaveCalcModal()">Cancel</button>
        <button class="btn btn-primary btn-sm pull-right" (click)="confirmSaveCalc()">Save</button>
      </div>
    </div>
  </div>
</div>


<div bsModal #opportunitySheetModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="opportunitySheetModalLabel" aria-hidden="true" [config]="{backdrop: 'static'}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body pl-0 pr-0" *ngIf="opportunitySheetModal.isShown">
        <app-opportunity-sheet (emitCancel)="hideOpportunitySheetModal()" (emitSave)="saveItemOpportunitySheet($event)"
          [(opportunitySheet)]="calculatorOpportunitySheet">
        </app-opportunity-sheet>
      </div>
    </div>
  </div>
</div>