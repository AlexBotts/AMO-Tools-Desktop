<div class="d-flex"
  [ngClass]="{'flex-row print-space-from-title' : (title == 'Cost Summary' || title == 'Team Summary'), 'flex-column' : title == 'Detailed Summary'}">

  <div class="d-flex flex-column output-summary" *ngIf="title != 'Team Summary'" #costSummaryChartContainer>

    <label class="group-label">{{title}}</label>
    <table class="table table-striped table-hover">
      <tbody>
        <tr class="bold">
          <td colspan="2" *ngIf="showFullSummary">
            Utility
          </td>
          <td *ngIf="!showFullSummary">
            Utility
          </td>
          <td *ngIf="showFullSummary">
            Current Use
          </td>
          <td *ngIf="showFullSummary">
            Projected Use
          </td>
          <td *ngIf="showFullSummary">
            Utility Savings
          </td>
          <td *ngIf="showFullSummary">
            Current Cost
          </td>
          <td *ngIf="showFullSummary">
            Projected Cost
          </td>
          <td>
            Cost Savings
          </td>
          <td>
            Implementation Cost
          </td>
          <td>
            Payback
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">

          </td>
        </tr>
        <!--Electricity-->
        <tr *ngIf="treasureHuntResults.electricity.baselineEnergyUsage != 0">
          <td class="bold">
            Electricity
          </td>
          <td *ngIf="showFullSummary">
            kWh
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.electricity.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.electricity.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.electricity.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.electricity.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.electricity.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.electricity.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.electricity.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.electricity.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span *ngIf="treasureHuntResults.electricity.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Natural Gas-->
        <tr *ngIf="treasureHuntResults.naturalGas.baselineEnergyUsage != 0">
          <td class="bold">
            Natural Gas
          </td>
          <td *ngIf="showFullSummary">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'">MJ</span>
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.naturalGas.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.naturalGas.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.naturalGas.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.naturalGas.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.naturalGas.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.naturalGas.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.naturalGas.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.naturalGas.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span *ngIf="treasureHuntResults.naturalGas.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Water-->
        <tr *ngIf="treasureHuntResults.water.baselineEnergyUsage != 0">
          <td class="bold">
            Water
          </td>
          <td *ngIf="showFullSummary">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">kgal</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'">m<sup>3</sup></span>
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.water.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.water.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.water.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.water.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.water.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.water.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.water.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.water.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.water.hasMixed == true">
            <span *ngIf="treasureHuntResults.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Waste Water-->
        <tr *ngIf="treasureHuntResults.wasteWater.baselineEnergyUsage != 0">
          <td class="bold">
            Waste Water
          </td>
          <td *ngIf="showFullSummary">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">kgal</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'">m<sup>3</sup></span>
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.wasteWater.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.wasteWater.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.wasteWater.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.wasteWater.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.wasteWater.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.wasteWater.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.wasteWater.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.wasteWater.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span *ngIf="treasureHuntResults.wasteWater.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Other Fuel-->
        <tr *ngIf="treasureHuntResults.otherFuel.baselineEnergyUsage != 0">
          <td class="bold">
            Other Fuel
          </td>
          <td *ngIf="showFullSummary">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'">MJ</span>
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.otherFuel.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.otherFuel.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.otherFuel.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.otherFuel.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.otherFuel.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.otherFuel.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.otherFuel.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.otherFuel.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span *ngIf="treasureHuntResults.otherFuel.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Compressed Air-->
        <tr *ngIf="treasureHuntResults.compressedAir.baselineEnergyUsage != 0">
          <td class="bold">
            Compressed Air
          </td>
          <td *ngIf="showFullSummary">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">kSCF</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'">Nm<sup>3</sup></span>
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.compressedAir.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.compressedAir.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.compressedAir.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.compressedAir.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.compressedAir.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.compressedAir.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.compressedAir.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.compressedAir.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span *ngIf="treasureHuntResults.compressedAir.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Steam-->
        <tr *ngIf="treasureHuntResults.steam.baselineEnergyUsage != 0">
          <td class="bold">
            Steam
          </td>
          <td *ngIf="showFullSummary">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">klb</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'">tonne</span>
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.steam.baselineEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.steam.modifiedEnergyUsage | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            {{treasureHuntResults.steam.energySavings | number:'1.0-1'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.steam.baselineEnergyCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.steam.modifiedEnergyCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.steam.costSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.steam.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.steam.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span *ngIf="treasureHuntResults.steam.hasMixed == true" class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Other -->
        <tr *ngIf="treasureHuntResults.other.implementationCost != 0">
          <td colspan="7" class="bold" *ngIf="showFullSummary">
            Mixed
          </td>
          <td class="bold" *ngIf="!showFullSummary">
            Mixed
          </td>
          <td>
            <!-- ${{treasureHuntResults.other.costSavings | number:'.0-0'}} -->
          </td>
          <td>
            ${{treasureHuntResults.other.implementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.other.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">
            <span class="fa fa-asterisk"></span>
          </td>
        </tr>
        <!--Total-->
        <tr>
          <td colspan="5" class="bold" *ngIf="showFullSummary">
            Total
          </td>
          <td class="bold" *ngIf="!showFullSummary">
            Total
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.totalBaselineCost | number:'.0-0'}}
          </td>
          <td *ngIf="showFullSummary">
            ${{treasureHuntResults.totalModificationCost | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.totalSavings | number:'.0-0'}}
          </td>
          <td>
            ${{treasureHuntResults.totalImplementationCost | number:'.0-0'}}
          </td>
          <td>
            {{treasureHuntResults.paybackPeriod | number:'1.0-2'}}
          </td>
          <td *ngIf="treasureHuntResults.hasMixed == true">

          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="alert-warning small mb-5"
    *ngIf="treasureHuntResults.hasMixed == true && showFullSummary && title != 'Team Summary'">
    <span class="fa fa-asterisk"></span>
    Savings for opportunities with mixed utilities are under their respective utilities; implementation costs and
    payback
    are under "Mixed."
  </div>

  <div class="d-flex flex-column hide-print" *ngIf="title == 'Cost Summary'">
    <app-cost-summary-chart [settings]="settings" [dataSetTitles]="dataSetTitles" [dataTitles]="dataTitles"
      [data]="data" [chartContainerWidth]="barChartWidth" [chartContainerHeight]="barChartHeight">
    </app-cost-summary-chart>
  </div>

  <div *ngIf="title == 'Team Summary' && teamData.length > 0" class="d-flex flex-column output-summary pb-5"
    #teamSummaryChartContainer>
    <label class="group-label">Team Summary</label>
    <table class="table table-striped table-hover">
      <tbody>
        <tr class="bold">
          <td>Team</td>
          <td>Cost Savings</td>
          <td>Implementation Cost</td>
          <td>Payback</td>
        </tr>
        <tr *ngFor="let data of teamData">
          <td>{{data.team}}</td>
          <td>${{data.costSavings | number:'.0-0'}}</td>
          <td>${{data.implementationCost | number:'.0-0'}}</td>
          <td>{{data.paybackPeriod | number:'1.0-2'}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="d-flex flex-column hide-print" *ngIf="title == 'Team Summary' && teamData.length > 0">
    <app-pie-chart [graphColors]="graphColors" [values]="pieChartValues" [labels]="pieChartLabels"
      [printView]="showPrint" [exportName]="'treasure-hunt-team-savings'" [chartContainerWidth]="pieChartWidth"
      [chartContainerHeight]="pieChartHeight" [sideBySide]="false"></app-pie-chart>
  </div>

</div>

<!-- print version of the chart -->
<div class="d-flex flex-row show-print print-bottom-padding" *ngIf="title == 'Cost Summary' && showPrint">
  <app-cost-summary-chart [settings]="settings" [dataSetTitles]="dataSetTitles" [dataTitles]="dataTitles" [data]="data"
    [chartContainerWidth]="barChartWidth" [chartContainerHeight]="barChartHeight">
  </app-cost-summary-chart>
</div>


<div class="d-flex flex-row show-print print-bottom-padding"
  *ngIf="title == 'Team Summary' && showPrint && teamData.length > 0">
  <app-pie-chart [graphColors]="graphColors" [values]="pieChartValues" [labels]="pieChartLabels" [printView]="showPrint"
    [exportName]="treasure-hunt-team-savings" [chartContainerWidth]="pieChartWidth"
    [chartContainerHeight]="pieChartHeight"></app-pie-chart>
</div>